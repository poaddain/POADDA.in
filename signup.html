<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POAdda Registration</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  font-family:'Segoe UI',sans-serif;
  margin:0;
  padding:20px;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#f9d423,#ff4e50);
}

form{
  background:#fff;
  border-radius:20px;
  padding:25px;
  width:100%;
  max-width:430px;
  box-shadow:0 15px 40px rgba(0,0,0,1);
}

/* ‚úÖ NEW */
.form-date{
  text-align:center;
  font-size:13px;
  color:#000;
  margin-bottom:6px;
  font-weight:600;
}
.form-title{
  text-align:center;
  font-size:18px;
  font-weight:bold;
  margin-bottom:15px;
  color:#333;
}

label{font-weight:600;margin-top:12px;display:block;}
input,select{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:14px;
}

.password-wrapper{position:relative;}
.toggle-password{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}

button{
  width:100%;
  padding:14px;
  margin-top:22px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:bold;
  color:#fff;
  background:linear-gradient(135deg,#4facfe,#00f2fe);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}

button:disabled{
  opacity:0.7;
  cursor:not-allowed;
}

.btn-spinner{
  width:18px;
  height:18px;
  border:3px solid rgba(255,255,255,0.6);
  border-top:3px solid #fff;
  border-radius:50%;
  animation:spin 1s linear infinite;
  display:none;
}

@keyframes spin{
  to{transform:rotate(360deg);}
}

.notifier{
  position:fixed;
  top:-80px;
  left:50%;
  transform:translateX(-50%);
  background:#333;
  color:#fff;
  padding:12px 20px;
  border-radius:10px;
  font-weight:bold;
  opacity:0;
  transition:.6s;
  z-index:9999;
}
.notifier.show{top:20px;opacity:1;}
.notifier.success{background:rgba(40,167,69,.9);}
.notifier.warning{background:rgba(255,193,7,.9);color:#000;}

.welcome-box{
  display:none;
  background:#fff;
  padding:30px;
  border-radius:20px;
  text-align:center;
  max-width:430px;
  box-shadow:0 15px 40px rgba(0,0,0,.6);
}

.welcome-box img{
  width:120px;
  animation:logoFloat 2.5s infinite ease-in-out;
}

@keyframes logoFloat{
  0%{transform:scale(1);}
  50%{transform:scale(1.05) translateY(-6px);}
  100%{transform:scale(1);}
}
</style>
</head>

<body>

<form id="signupForm">

  <!-- ‚úÖ NEW -->
  <div class="form-date">
    Date: <span id="currentDate"></span>
  </div>
  <div class="form-title">POADDA REGISTRATION FORM</div>

  <label>Name</label>
  <input type="text"
         name="name"
         placeholder="Enter your full name"
         required>

  <label>Mobile No.</label>
  <input type="text"
         name="mobile"
         placeholder="Enter your 10 digit mobile number"
         maxlength="10"
         pattern="^[0-9]{10}$"
         inputmode="numeric"
         required>

  <label>Create Password</label>
  <div class="password-wrapper">
    <input type="password"
           id="password"
           name="password"
           minlength="6"
           maxlength="15"
           pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,15}$"
           placeholder="Create your password"
           required>
    <i class="fa-solid fa-eye toggle-password"
       onclick="togglePassword('password')"></i>
  </div>

  <div style="font-size:12px;color:#666;margin-top:4px;">
    Password must be at least <b>6</b> and maximum <b>15</b> characters with
    <b>Alphanumeric</b> combination.
  </div>

  <label>Confirm Password</label>
  <input type="text"
         name="confirmPassword"
         placeholder="Re-enter your password"
         required>

  <label>Exam</label>
  <select name="exam" required>
    <option value="">Select</option>
    <option value="IPO">IPO</option>
    <option value="PA/SA">PA/SA</option>
    <option value="POSTMAN">POSTMAN</option>
    <option value="MTS">MTS</option>
  </select>

  <label>Subscription</label>
  <select name="subscription">
    <option>Practice Set Only</option>
  </select>

  <button type="submit" id="submitBtn">
    <span id="btnText">Submit</span>
    <span class="btn-spinner" id="btnSpinner"></span>
  </button>

</form>

<div class="welcome-box" id="welcomeBox">
  <img src="logo.png">
  <h3 id="welcomeText"></h3>
  <div id="welcomeDetails"></div>
</div>

<div class="notifier" id="notifier"></div>

<script>
document.getElementById("currentDate").innerText =
  new Date().toLocaleDateString();

const form=document.getElementById("signupForm");
const notifier=document.getElementById("notifier");
const btn=document.getElementById("submitBtn");
const btnText=document.getElementById("btnText");
const spinner=document.getElementById("btnSpinner");

function togglePassword(id){
  const i=document.getElementById(id);
  i.type=i.type==="password"?"text":"password";
}

function showNotifier(msg,type="success"){
  spinner.style.display="none";
  btn.disabled=false;
  btnText.innerText="Submit";
  notifier.textContent=msg;
  notifier.className="notifier show "+type;
  setTimeout(()=>notifier.classList.remove("show"),2000);
}

form.addEventListener("submit",async e=>{
  e.preventDefault();
  const data=Object.fromEntries(new FormData(form));

  if(data.password!==data.confirmPassword){
    showNotifier("Password mismatch ‚ùå","warning");
    return;
  }

  btn.disabled=true;
  btnText.innerText="Submitting...";
  spinner.style.display="inline-block";

  try{
    const res=await fetch(
      "https://script.google.com/macros/s/AKfycbxcp5wXF3RnA5pv0FTlX7Bkad6s4xmXuLY4WhQk3xz7WJhM4-2Mpzi-rygF6TLoOEos/exec",
      {method:"POST",body:new URLSearchParams({...data,action:"signup"})}
    );
    const result=await res.json();

    if(result.status==="success"){
      showNotifier("Successfully Registered ‚úÖ","success");
      setTimeout(()=>{
        form.style.display="none";
        document.getElementById("welcomeText").innerText=
          `Welcome ${data.name} to your journey towards excellence in Postal career`;
        document.getElementById("welcomeDetails").innerHTML=
          `üì± Mobile: <b>${data.mobile}</b><br>üîê Password: <b>${data.password}</b>`;
        document.getElementById("welcomeBox").style.display="block";
      },2200);
    }else{
      showNotifier("Already registered ‚ö†Ô∏è","warning");
    }
  }catch{
    showNotifier("Network error","warning");
  }
});
</script>

</body>
</html>
